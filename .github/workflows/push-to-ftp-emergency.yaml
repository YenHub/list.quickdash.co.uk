name:                  ðŸš‘ Emergency Deploy
on:                    [workflow_dispatch]
jobs:
  web-deploy:
    name:              ðŸš‘ Emergency Deploy
    runs-on:           ubuntu-latest
    steps:
    - name:            ðŸšš Get latest code
      uses:            actions/checkout@v2.3.2

    - name:            Use Node.js 12
      uses:            actions/setup-node@v2-beta
      with:
        node-version:  '12'

    - name:            ðŸ”¨ Build Project
      run:             |
        cd client
        npm ci
        INLINE_RUNTIME_CHUNK=false npm run build

    - name:            ðŸ“‚ Sync files
      uses:            SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server:        ${{ secrets.ftpserver }}
        username:      ${{ secrets.ftpuser }}
        password:      ${{ secrets.ftppass }}
        local-dir:     ./client/build/